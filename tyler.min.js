!function(a,b){"object"==typeof exports?module.exports=b(require("umodel")):"function"==typeof define&&define.amd?define("tyler",["umodel"],b):a.tyler=b(a.umodel)}(this,function(a){var b,c,d=[].slice,e={}.hasOwnProperty,f=function(a,b){return function(){return a.apply(b,arguments)}};return c={extend:function(){var a,b,c,f,g,h;if(b=arguments[0],f=2<=arguments.length?d.call(arguments,1):[],b&&f)for(g=0,h=f.length;h>g;g++){c=f[g];for(a in c)e.call(c,a)&&(b[a]=c[a])}return b},sortBy:function(a,b){var c,d,e,f;return null==a[0][b]&&(a[0][b]=1),d="number"==typeof a[0][b],e=function(a){return function(b,c){return b[a].localeCompare(c[a])}},f=function(a){return function(b,c){return b[a]<c[a]}},c=(d?f:e)(b),a.sort(c)},template:function(a,b){return null==b&&(b={}),a.call(b)},one:function(a){var b;for(b in a)return b}},b=function(){function b(b,d,e){this.element=null!=d?d:document.body,this.move=f(this.move,this),this.click=f(this.click,this),c.extend(this.options,e),this.model=new a({moving:!1,size:0}),this.setCSS(),b&&this.data(b),this.addEventListeners()}return b.prototype.options={columns:2,offsetX:0,offsetY:0,templateWrap:function(){return'<div class="'+this.classNames.tile+'" style="left:'+this.x+"px;top:"+this.y+'px">\n	<div class="tile-inner">\n		'+this.front+"\n		"+this.back+"\n	</div>\n</div>"},templateFront:function(){return'<div class="tile-front" style="background-image:url('+this.pic+')">\n	<span class="name">'+this.name+"</span>\n</div>"},templateBack:function(){return'<div class="tile-back"></div>'},classNames:{tile:"tile",tileFlipped:"flipped"},animation:{duration:500,fn:"ease-out"}},b.prototype.addEventListeners=function(){return document.addEventListener("click",this.click),document.addEventListener("touchend",this.click),document.addEventListener("touchmove",this.move)},b.prototype.data=function(a){var b;return b=this.layout(a),b?this.render(b):void 0},b.prototype.click=function(a){var b;return this.model.get("moving")?(a.preventDefault(),this.model.set("moving",!1)):(b=this.getTile(a))?b.classList.toggle(this.options.classNames.tileFlipped):void 0},b.prototype.move=function(){return this.model.set("moving",!0)},b.prototype.getTile=function(a){var b;for(b=a.target;b!==document;){if(this.isTile(b))return b;b=b.parentNode}},b.prototype.isTile=function(a){return a.classList.contains(this.options.classNames.tile)},b.prototype.setCSS=function(){var a,b,c,d,e;return a=this.element.offsetHeight,e=this.element.offsetWidth,d=e/this.options.columns,b="."+this.options.classNames.tile+" {\n	height: "+d+"px;\n	width: "+d+"px;\n	-webkit-transition: all "+this.options.animation.duration+"ms "+this.options.animation.fn+"\n}",c=document.styleSheets[0],c.insertRule(b,c.cssRules.length),this.model.set("size",d)},b.prototype.layout=function(a){var b,d,e,f,g,h,i;if(a&&"undefined"!=typeof c.one(a)){for(c.sortBy(a,"weight"),e=this.model.get("size"),i=[],d=g=0,h=a.length;h>g;d=++g)f=a[d],b={x:e*(d%2)+this.options.offsetX,y:e*Math.floor(d/this.options.columns)+this.options.offsetY},i.push(c.extend(f,b));return i}},b.prototype.render=function(a){var b,d,e,f,g,h;if(a.length){for(e="",g=0,h=a.length;h>g;g++)f=a[g],d=c.template(this.options.templateFront,f),b=c.template(this.options.templateBack,f),e+=c.template(this.options.templateWrap,c.extend(f,this.options,{front:d,back:b}));return this.element.innerHTML=e}},b}()});